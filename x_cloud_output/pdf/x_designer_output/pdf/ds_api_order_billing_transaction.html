<div class="post-header">
    <h1 class="post-title-main" id="ds_api_order_billing_transaction.html">Order Billing Transactions API</h1>
</div>

<div class="post-content">

    
    <div class="summary">​Use the Order Billing Transaction API to retrieve information about the payment of orders, like the amount, payment processor, currency, credit card, and status.</div>
    
    <p>An order billing transaction is created when a transaction was sent to a payment provider. A transaction holds information about the actual payment, while a billing holds information about the billing address. A billing can have one to many transactions. For example, if an order was paid for with two different credit cards, there would be two transactions.</p>

<p>​Use the Order Billing Transactions API to retrieve information about the payment of orders, like the amount, payment processor, currency, credit card, and status.</p>

<h2>Fields</h2>

<p>The following table shows all fields that exist for this API and those that are returned when you retrieve a list. All fields are returned when you retrieve a single item.</p>

<table>
<tbody>
<tr>
    <td><strong>Name</strong></td>
    <td><strong>Description</strong></td>
    <td><strong>Type</strong></td>
    <td><strong>List</strong></td>
</tr>
<tr>
    <td>​<code>user_id</code></td>
    <td>The unique ID of the authenticated user</td>
    <td>string</td>
    <td>X</td>
</tr>
<tr>
    <td><code>site_id</code></td>
    <td>ID of a Weebly site, unique to the currently authenticated user​</td>
    <td>string</td>
    <td>X</td>
</tr>

<tr>
<td><code>order_id</code></td>
<td>​The unique order ID (within the store) of the <a href="ds_api_order.html">order</a>.</td>
<td>string</td>
<td>X</td>
</tr>

<tr>
<td><code>order_billing_id</code></td>
    <td>The unique billing ID (within the order) of the <a href="ds_api_order_billing.html">billing</a>.</td>
<td>integer</td>
<td>X</td>
</tr>
    <tr>
        <td><code>order_billing_transaction_id</code></td>
        <td>​The unique transaction ID (within the billing) of the transaction.</td>
        <td>integer</td>
        <td>X</td>
    </tr>
    <tr>
        <td><code>method</code></td>
        <td>Type of billing transaction. <br />Valid values are:
            <ul>
            <li><code>purchase</code>: order was purchased</li>
            <li><code>void</code>: order was cancelled</li>
            <li><code>refund</code>: order was returned and refunded</li>
            </ul>
        </td>
        <td>string</td>
        <td></td>
    </tr>
    <tr>
        <td><code>status</code></td>
        <td>Status of the transaction.<br />
            Valid values are:
           <ul>
               <li><code>success</code></li>
            <li><code>failure</code></li>
            <li><code>note</code>: The transaction required manual intervention by the merchant.</li>
           </ul>
        </td>
        <td>string</td>
        <td></td>
    </tr>
    <tr>
        <td><code>amount</code></td>
        <td>Amount of this transaction.</td>
        <td>integer</td>
        <td></td>
    </tr>
    <tr>
        <td><code>currency</code></td>
        <td>Currency used for this transaction.</td>
        <td>string</td>
        <td></td>
    </tr>
    <tr>
        <td><code>tx_fee</code></td>
        <td>Any fee charged for this transaction.</td>
        <td>string</td>
        <td></td>
    </tr>
    <tr>
        <td><code>tx_id</code></td>
        <td>An external ID for the transaction, often provided by the payment processor.</td>
        <td>string</td>
        <td></td>
    </tr>
    <tr>
        <td><code>tx_message</code></td>
        <td>Message sent from the payment provider associated with this transaction.</td>
        <td>string</td>
        <td></td>
    </tr>
    <tr>
        <td><code>cc_type</code></td>
        <td>Type of credit card used for this transaction.<br />
            Valid values are:
            <ul>
                <li><code>American Express</code></li>
            <li><code>Visa</code></li>
            <li><code>Mastercard</code></li>
            <li><code>Discover</code></li>
            <li><code>PayPal</code></li>
            <li><code>Diners Club</code></li>
            <li><code>JCB</code></li>
            </ul>
            ​Returns <code>false</code> if a credit card was not used.​</td>
        <td>string</td>
        <td></td>
    </tr>
    <tr>
        <td><code>cc_last_4</code></td>
        <td>Last four digits of the credit card used for this transaction. Returns <code>false</code> if a credit card was not used.</td>
        <td>string</td>
        <td></td>
    </tr>
    <tr>
        <td><code>created_date</code></td>
        <td>Date the transaction was created</td>
        <td>Unix GMT Timestamp</td>
        <td></td>
    </tr>
    <tr>
        <td><code>updated_date</code></td>
        <td>Date the transaction was last updated </td>
        <td>Unix GMT Timestamp</td>
        <td></td>
    </tr>
    </tbody>
</table>

<div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> Any fields returned that are not documented are currently unsupported and can be safely ignored.</div>

<h2>
<div class="Tag type_info">GET</div>

 Retrieve a List of Billing Transactions</h2>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">GET /user/USER_ID/site/<span class="o">{</span>SITE_ID<span class="o">}</span>/store/order/<span class="o">{</span>ORDER_ID<span class="o">}</span>/billing/<span class="o">{</span>ORDER_BILLING_ID<span class="o">}</span>/transaction</code></pre></figure>

<p>Returns all transactions for the given <a href="ds_api_order_billing.html">billing</a>. Only <code class="highlighter-rouge">list</code> fields are returned.</p>

<p class="codeTitle">Example CURL request returning all transactions:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">curl https://api.weeblycloud.com/user/123456/site/987654321/store/order/456789/billing/1/transaction <span class="se">\</span>
-H <span class="s2">"X-Public-Key: YOURAPIKEY"</span> <span class="se">\</span>
-H <span class="s2">"X-Signed-Request-Hash: YOURSECRETHASH"</span></code></pre></figure>

<p class="codeTitle">Example response:</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"site_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"987654321"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"456789"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"order_billing_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"order_billing_transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"site_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"987654321"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"456789"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"order_billing_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"order_billing_transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span></code></pre></figure>

<h2>
<div class="Tag type_info">GET</div>

 Retrieve the Number of Transactions for a Billing</h2>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">GET /user/USER_ID/site/<span class="o">{</span>SITE_ID<span class="o">}</span>/store/order/<span class="o">{</span>ORDER_ID<span class="o">}</span>/billing/<span class="o">{</span>ORDER_BILLING_ID<span class="o">}</span>/transaction/count</code></pre></figure>

<p>Returns the number of transactions for a billing.</p>

<p class="codeTitle">Example CURL request:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">curl https://api.weeblycloud.com/user/123456/site/987654321/store/order/456789/billing/1/transaction/count <span class="se">\</span>
-H <span class="s2">"X-Public-Key: YOURAPIKEY"</span> <span class="se">\</span>
-H <span class="s2">"X-Signed-Request-Hash: YOURSECRETHASH"</span></code></pre></figure>

<p class="codeTitle">Example response:</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

<h2>
<div class="Tag type_info">GET</div>

 Retrieve Details for a Billing Transaction
</h2>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">GET /user/USER_ID/site/<span class="o">{</span>SITE_ID<span class="o">}</span>/store/order/<span class="o">{</span>ORDER_ID<span class="o">}</span>/billing/<span class="o">{</span>ORDER_BILLING_ID<span class="o">}</span>/transaction/<span class="o">{</span>ORDER_BILLING_TRANSACTION_ID<span class="o">}</span></code></pre></figure>

<p>Returns all fields for the given transaction.</p>

<p class="codeTitle">Example CURL request:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">curl https://api.weeblycloud.com/user/123456/site/987654321/store/order/456789/billing/1/transaction/1 <span class="se">\</span>
-H <span class="s2">"X-Public-Key: YOURAPIKEY"</span> <span class="se">\</span>
-H <span class="s2">"X-Signed-Request-Hash: YOURSECRETHASH"</span></code></pre></figure>

<p class="codeTitle">Example response:</p>
<p>See Fields table. All fields for the transaction are returned.</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"site_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"987654321"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"456789"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"order_billing_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"order_billing_transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"purchase"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">700</span><span class="p">,</span><span class="w">
    </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"tx_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"tx_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ch_16pmkuKRCoO7IeaFWfKff7Zm"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"tx_message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Transaction approved"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"cc_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Visa"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"cc_last_4"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4242"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"created_date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1443389544</span><span class="p">,</span><span class="w">
    </span><span class="nt">"updated_date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1443389545</span><span class="w">
</span><span class="p">}</span></code></pre></figure>


</div>
